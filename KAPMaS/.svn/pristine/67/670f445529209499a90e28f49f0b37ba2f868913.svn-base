<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page trimDirectiveWhitespaces="true" %>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"  %>

<head>
	<style type="text/css">
	body{
		background-color: white;
		padding: 50px;
	}
	
	h1 {
		text-align: center;
	
	}	
	</style>

</head>


<body>
	<h1><u>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;쪽지&nbsp;&nbsp;상세&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</u></h1>
	<br><br>
	<div>
	<h4 style="float:left">보낸 사람 : ${emp.empName }</h4>
	<p style="float:right; margin-right:10px; font-size: large;">${rmail.rmReceivedate }</p>
	<p style="float:right;margin-right:10px; font-size: large;">제목 : <c:out value="${rmail.rmTitle }" /></p>
	</div>
	<input id="hobbyList" hidden="" name="hobbyList" value="">
	<br><br><br>
	<div style="min-height:300px;font-size:15px;">
		내용 : <br>
		<c:if test="${rmail.rmEnabled == '2' }">
			${rmail.rmContent }
		</c:if>
		<c:if test="${rmail.rmEnabled != '2' }">
			<c:out value="${rmail.rmContent }" />
		</c:if>
	</div>
	
	<br><br>
	<div style="margin: 0 auto; width:30%;">
	<button type="button" class="btn btn-gray me-1 mb-1" 
		style="float: left;"  onclick="CloseWindow();">&nbsp;&nbsp;&nbsp;취 &nbsp;&nbsp;소&nbsp;&nbsp;&nbsp;</button>
	<button type="button"  class="btn btn-yellow me-1 mb-1"
		style="float: right: ;"  onclick="reSend('${rmail.rmSender }');">&nbsp;&nbsp;&nbsp;답&nbsp;&nbsp;장&nbsp;&nbsp;&nbsp;</button>
	</div>
		
	<input type="text" hidden="" id="empId" value="${loginUser.empId }">
	<input type="text" hidden="" id="rmCode" value="${rmail.rmCode }">
	
<script type="text/javascript">

function reSend(sender){
	
	location.href="<%=request.getContextPath()%>/mypage/reSend?sender="+sender;
}

function Close(){
	var html='';
	var rmCode = $("#rmCode").val();
	
	
	html += ''+rmCode+'';
	$('#hobbyList').val(html);   
	var checked = $('#hobbyList').val();
	
	var data = {
			"checked":checked
	}
	
	$.ajax({
		url : "<%=request.getContextPath() %>/mypage/deleteRmail",
		type : "post",
		data : JSON.stringify(data),
		contentType:"application/json;charset=utf-8",
		success:function(data){
			
			alert("초대를 거절하였습니다");
			CloseWindow();
		},
		
		error:function(error){
			alert("초대를 거절하였습니다");
			CloseWindow();
		}
		
	});
	
	
	
}











function projecterIn(pCode){
	
	var empId = $("#empId").val();
	var rmCode = $("#rmCode").val();
	
	var data = {
			"empId" : empId
			,"pCode": pCode
			,"rmCode":rmCode
	}
	
	$.ajax({
		url : "<%=request.getContextPath() %>/project/projecter",
		type : "post",
		data : JSON.stringify(data),
		contentType:"application/json;charset=utf-8",
		success:function(data){
			
			alert("초대가 완료되었습니다.");
			
			CloseWindow();
		},
		
		error:function(error){
			alert("초대가 완료되었습니다.");
			CloseWindow();
		}
		
	});
	
	
	
	
	
	
}




</script>
	
	
	
</body>








