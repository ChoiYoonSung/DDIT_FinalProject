<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page trimDirectiveWhitespaces="true" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>



<style>

li {

	font-size: 17px;
}





</style>



<body style="background-color: white; padding: 10px;">

<h1><u>프로젝트 참여 인원&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</u></h1>
<br><br>


<button type="button" class="btn btn-yellow me-1 mb-1" style="float: right;" onclick="OpenWindow('projecterCome.do','쪽지보내기',900,800);" >참여자 초대</button>
<br><br><br>
	<div class="table-responsive" style="float: left; padding-left: 100px;">
		<table class="table table-hover mb-0 text-inverse" >
			<thead>
				<tr>
					<th width="100px;">번호</th>
					<th width="100px;">이름</th>
					<th width="100px;">Authority</th>
					<th width="100px;">업무 진척도</th>
				</tr>
			</thead>
			<tbody>
				<c:forEach items="${pjmList}" var="proEmp">
				<tr onclick="page_go('${proEmp.empName}','${proEmp.empImg}','${proEmp.pmAuthority}'
				,'${proEmp.depCode}','${proEmp.rnkCode}','${proEmp.empEmail}','${proEmp.empPhone}','${proEmp.empAdd}',
				'${proEmp.pCode}')">
					<td>1</td>
					<td>${proEmp.empName}</td>
					<td>${proEmp.pmAuthority}</td>
					<td>
						<div class="progress mb-2">
						<div class="progress-bar fs-10px fw-bold" style="width: 80%">Basic</div>
						</div>
					</td>
				</tr>
				</c:forEach>
				<c:if test="${empty pjmList}" >
				<tr>
					<td>1</td>
					<td>현재 참여중인</td>
					<td>프로젝트 참여자가 없습니다</td>
					<td>
					</td>
				</tr>
				</c:if>
			</tbody>
		</table>
	</div>

	
	<div class="table-responsive"style="display: flex; justify-content: center;">
			<div class="project-item">
				<div style="height: 30px;" >
					<h4 style="color:black; float:left;" id="name">이름</h4>
					<a href="detail.do?pCode=${pro.pCode }"><span class="badge bg-secondary" style="float:right;padding: 5px; width: 100px;">프로젝트 제명</span></a>		
					<span class="badge bg-primary" style="float:left ; margin-left:5px; padding: 5px; width: 50px;" id="authority">Authority</span>
				</div>
				<img id="image" src="" alt="회원사진" style="width: 250px;  height: 370px;">
				<div class="d-flex align-items-center mb-2px">
				<ul class="list-unstyled">
  					<li>부서 : <span id="dep"></span></li>
					<li>직급 :  <span id="rnk"></span></li>
					<li>이메일 :  <span id="mail"></span></li>
					<li>전화번호 :	 <span id="ph"></span></li>
					<li>주소 :  <span id="ad"></span></li>
				</ul>
				</div>	
			</div>
		</div>


<script type="text/javascript">

function page_go(name,img,authority,depCode,rnkCode,email,phone,add,pCode){
	
	var data={
			"depCode":depCode,
			"rnkCode":rnkCode
	}
	
	$.ajax({
		url : "<%=request.getContextPath() %>/project/getMemberInfo",
		type : "post",
		data : JSON.stringify(data),
		contentType:"application/json",
		success:function(data){
			var result=data.split(',');
			
			document.getElementById('dep').innerHTML=result[0];
			document.getElementById('rnk').innerHTML=result[1];
			
		},
		error:function(error){
			
			alert("시스템오류로입니다.관리자에게 문의해주세요.");
		}
		
	});
	
	
	document.getElementById('name').innerHTML=name ;
	document.getElementById('authority').innerHTML=authority ;
	var img = document.getElementById('image');
	img.setAttribute('src', '<%=request.getContextPath() %>/resources/images/logo-remove.png');
	document.getElementById('mail').innerHTML=email ;
	document.getElementById('ph').innerHTML=phone ;
	document.getElementById('ad').innerHTML=add ;
	
	
	
	
}




</script>



</body>

































